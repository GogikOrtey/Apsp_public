08.12.2025 01:29:29

ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ñ‹, Ð¸ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼ parseCard
Ð•ÑÑ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ‚Ñ€Ð¸Ð³Ð³ÐµÑ€ InStock, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ ÐµÐ³Ð¾
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ h1.name Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–1
ðŸ’ Ð’Ð°Ð½Ð½Ð° Ð°ÐºÑ€Ð¸Ð»Ð¾Ð²Ð°Ñ 170Ñ…70 Ð£Ð»ÑŒÑ‚Ñ€Ð°-170 # Ð¢Ð Ð˜Ð¢ÐžÐðŸ’ 
ðŸ”¶Ð’Ð°Ð½Ð½Ð° Ð°ÐºÑ€Ð¸Ð»Ð¾Ð²Ð°Ñ 170Ñ…70 Ð£Ð»ÑŒÑ‚Ñ€Ð°-170 # Ð¢Ð Ð˜Ð¢ÐžÐðŸ”¶

âœ… ÐŸÐ¾Ð»Ð½Ð¾Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð° Ð¸ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»Ñ
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ h1.name Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–2
ðŸ’ 32,7Ñ…32,7 ÐœÐ¾Ð·Ð°Ð¸ÐºÐ° Aqua 100 (Ð½Ð° Ð±ÑƒÐ¼Ð°Ð³Ðµ) 20*20*4 BonaparteðŸ’ 
ðŸ”¶32,7Ñ…32,7 ÐœÐ¾Ð·Ð°Ð¸ÐºÐ° Aqua 100 (Ð½Ð° Ð±ÑƒÐ¼Ð°Ð³Ðµ) 20*20*4 BonaparteðŸ”¶

âœ… ÐŸÐ¾Ð»Ð½Ð¾Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð° Ð¸ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»Ñ
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ h1.name Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–3
ðŸ’ Ð¢ÑƒÐ¼Ð±Ð° ÐÐ³Ð°Ñ‚Ð° 55 Ð½Ð°Ð¿Ð¾Ð»ÑŒÐ½Ð°Ñ Ñ ÑƒÐ¼Ñ‹Ð²Ð°Ð»ÑŒÐ½Ð¸ÐºÐ¾Ð¼ Ð’Ð¸Ð·Ð¸Ñ‚-55, Ð±ÐµÐ»Ð°Ñ EMMYðŸ’ 
ðŸ”¶Ð¢ÑƒÐ¼Ð±Ð° ÐÐ³Ð°Ñ‚Ð° 55 Ð½Ð°Ð¿Ð¾Ð»ÑŒÐ½Ð°Ñ Ñ ÑƒÐ¼Ñ‹Ð²Ð°Ð»ÑŒÐ½Ð¸ÐºÐ¾Ð¼ Ð’Ð¸Ð·Ð¸Ñ‚-55, Ð±ÐµÐ»Ð°Ñ EMMYðŸ”¶

âœ… ÐŸÐ¾Ð»Ð½Ð¾Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð° Ð¸ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»Ñ
max_count_element_of_selectors = ðŸŸ¡ 1
---
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ .b Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–1
ðŸ’ Ð¦ÐµÐ½Ð°: 8 390 Ñ€ÑƒÐ±.ðŸ’ 
ðŸ”¶8 390 Ñ€ÑƒÐ±.ðŸ”¶

ðŸ’² ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ Ð¿Ð¾Ð»Ðµ price
p1 = 8390.
p2 = 8390
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ .b Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–2
ðŸ’ Ð¦ÐµÐ½Ð°: 1 860,10 Ñ€ÑƒÐ±.ðŸ’ 
ðŸ”¶1 860,10ðŸ”¶

ðŸ’² ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ Ð¿Ð¾Ð»Ðµ price
p1 = 186010.
p2 = 1860.10
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ .b Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–3
ðŸ’ Ð¦ÐµÐ½Ð°: 9 400,00 Ñ€ÑƒÐ±.ðŸ’ 
ðŸ”¶9 400,00ðŸ”¶

ðŸ’² ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ Ð¿Ð¾Ð»Ðµ price
p1 = 940000.
p2 = 9400.00
max_count_element_of_selectors = ðŸŸ¡ 1
---
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ .thr Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–1
â¬œ ÐÐµÑ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð° Ñƒ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð°  Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ 1 Ð´Ð»Ñ Ð¿Ð¾Ð»Ñ oldPrice
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ .thr Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–2
ðŸ’ ÑÑ‚Ð°Ñ€Ð°Ñ Ñ†ÐµÐ½Ð°: 1 958 Ñ€ÑƒÐ±.ðŸ’ 
ðŸ”¶1 958ðŸ”¶

ðŸ’² ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ Ð¿Ð¾Ð»Ðµ oldPrice
p1 = 1958.
p2 = 1958
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ .thr Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–3
ðŸ’ ÑÑ‚Ð°Ñ€Ð°Ñ Ñ†ÐµÐ½Ð°: 12 450,00 Ñ€ÑƒÐ±.ðŸ’ 
ðŸ”¶12 450,00ðŸ”¶

ðŸ’² ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÐ¼ Ð¿Ð¾Ð»Ðµ oldPrice
p1 = 1245000.
p2 = 12450.00
max_count_element_of_selectors = ðŸŸ¡ 1
---
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ .char > p:nth-of-type(1) Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–1
ðŸ’ U4031689ðŸ’ 
ðŸ”¶U4031689ðŸ”¶

âœ… ÐŸÐ¾Ð»Ð½Ð¾Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð° Ð¸ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»Ñ
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ .char > p:nth-of-type(1) Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–2
ðŸ’ B2508830ðŸ’ 
ðŸ”¶B2508830ðŸ”¶

âœ… ÐŸÐ¾Ð»Ð½Ð¾Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð° Ð¸ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»Ñ
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ .char > p:nth-of-type(1) Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–3
ðŸ’ U4079315ðŸ’ 
ðŸ”¶U4079315ðŸ”¶

âœ… ÐŸÐ¾Ð»Ð½Ð¾Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð° Ð¸ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»Ñ
max_count_element_of_selectors = ðŸŸ¡ 1
---
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ .char > p:nth-of-type(2) Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–1
ðŸ’ Ð¢Ð Ð˜Ð¢ÐžÐðŸ’ 
ðŸ”¶Ð¢Ð Ð˜Ð¢ÐžÐðŸ”¶

âœ… ÐŸÐ¾Ð»Ð½Ð¾Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð° Ð¸ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»Ñ
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ .char > p:nth-of-type(2) Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–2
ðŸ’ BonaparteðŸ’ 
ðŸ”¶BonaparteðŸ”¶

âœ… ÐŸÐ¾Ð»Ð½Ð¾Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð° Ð¸ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»Ñ
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ .char > p:nth-of-type(2) Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–3
ðŸ’ EMMYðŸ’ 
ðŸ”¶EMMYðŸ”¶

âœ… ÐŸÐ¾Ð»Ð½Ð¾Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð° Ð¸ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»Ñ
max_count_element_of_selectors = ðŸŸ¡ 1
---
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ html > body > section.wrap > main > article.wide > .card > .img_bl > .img > a.fancybox[href] Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–1
Ð’ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ðµ /upload/iblock/db8/4db0f322_ffe9_11e6_94b1_002590746688_bed22781_05a3_11e7_94b1_002590746688.jpeg Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚ Ñ…Ð¾ÑÑ‚. Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼:
ðŸ’ https://stroytorg812.ru/upload/iblock/db8/4db0f322_ffe9_11e6_94b1_002590746688_bed22781_05a3_11e7_94b1_002590746688.jpegðŸ’ 
ðŸ”¶https://stroytorg812.ru/upload/iblock/db8/4db0f322_ffe9_11e6_94b1_002590746688_bed22781_05a3_11e7_94b1_002590746688.jpegðŸ”¶

âœ… ÐŸÐ¾Ð»Ð½Ð¾Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð° Ð¸ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»Ñ
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ html > body > section.wrap > main > article.wide > .card > .img_bl > .img > a.fancybox[href] Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–2
Ð’ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ðµ /upload/iblock/672/fe473651_57f3_11e3_a425_00148557b27c_f22d79df_bddb_11e3_beaf_a65927533166.jpeg Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚ Ñ…Ð¾ÑÑ‚. Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼:
ðŸ’ https://stroytorg812.ru/upload/iblock/672/fe473651_57f3_11e3_a425_00148557b27c_f22d79df_bddb_11e3_beaf_a65927533166.jpegðŸ’ 
ðŸ”¶https://stroytorg812.ru/upload/iblock/672/fe473651_57f3_11e3_a425_00148557b27c_f22d79df_bddb_11e3_beaf_a65927533166.jpegðŸ”¶

âœ… ÐŸÐ¾Ð»Ð½Ð¾Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð° Ð¸ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»Ñ
ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€ html > body > section.wrap > main > article.wide > .card > .img_bl > .img > a.fancybox[href] Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ â„–3
Ð’ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ðµ /upload/iblock/6f8/103ef337_79a5_11f0_8c17_002590746688_b21dfec2_7e5d_11f0_8c17_002590746688.jpeg Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚ Ñ…Ð¾ÑÑ‚. Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼:
ðŸ’ https://stroytorg812.ru/upload/iblock/6f8/103ef337_79a5_11f0_8c17_002590746688_b21dfec2_7e5d_11f0_8c17_002590746688.jpegðŸ’ 
ðŸ”¶https://stroytorg812.ru/upload/iblock/6f8/103ef337_79a5_11f0_8c17_002590746688_b21dfec2_7e5d_11f0_8c17_002590746688.jpegðŸ”¶

âœ… ÐŸÐ¾Ð»Ð½Ð¾Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´ÐµÐ½Ð¸Ðµ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð° Ð¸ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»Ñ
max_count_element_of_selectors = ðŸŸ¡ 3
---
ÐÐ°ÑˆÐ»Ð¸ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÑÐµÐ»ÐµÐºÑ‚Ð¾Ñ€Ð° Ð´Ð»Ñ Ð¿Ð¾Ð»Ñ imageLink

Sorted value_field = 
		const name = $("h1.name").text()?.trim()
		const stock = $(".nal.y").text()?.includes("ÐµÑÑ‚ÑŒ Ð½Ð° ÑÐºÐ»Ð°Ð´Ðµ") ? "InStock" : "OutOfStock"
		const link = set.query
		const price = $(".b").text()?.trim().formatPrice(",")
		const oldPrice = $(".thr").text()?.trim().formatPrice(",")
		const article = $(".char > p:nth-of-type(1)").text()?.trim()
		const brand = $(".char > p:nth-of-type(2)").text()?.trim()
		const imageLink = $("html > body > section.wrap > main > article.wide > .card > .img_bl > .img > a.fancybox")?.first()?.attr("href")?.trim() ? HOST + $("html > body > section.wrap > main > article.wide > .card > .img_bl > .img > a.fancybox")?.first()?.attr("href")?.trim() : ""

    async parseCard(set: SetType, cacher: Cacher<ResultItem[]>) {
        let items: ResultItem[] = []

        const data = await this.makeRequest(set.query);
        const $ = cheerio.load(data);

        const name = $("h1.name").text()?.trim()
		const stock = $(".nal.y").text()?.includes("ÐµÑÑ‚ÑŒ Ð½Ð° ÑÐºÐ»Ð°Ð´Ðµ") ? "InStock" : "OutOfStock"
		const link = set.query
		const price = $(".b").text()?.trim().formatPrice(",")
		const oldPrice = $(".thr").text()?.trim().formatPrice(",")
		const article = $(".char > p:nth-of-type(1)").text()?.trim()
		const brand = $(".char > p:nth-of-type(2)").text()?.trim()
		const imageLink = $("html > body > section.wrap > main > article.wide > .card > .img_bl > .img > a.fancybox")?.first()?.attr("href")?.trim() ? HOST + $("html > body > section.wrap > main > article.wide > .card > .img_bl > .img > a.fancybox")?.first()?.attr("href")?.trim() : ""
        const timestamp = getTimestamp()

        const item: ResultItem = {
            name, stock, link, price, oldPrice, article, brand, imageLink, timestamp
        }
        items.push(item);

        cacher.cache = items
        return items;
    }
    
