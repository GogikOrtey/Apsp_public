09.12.2025 16:16:47




--------------------------------------------------------------------------------------------------

                                        GLOBAL CODE GEN

--------------------------------------------------------------------------------------------------


field = name, stock, link, price, oldPrice, article, brand, imageLink, timestamp



--------------------------------------------------------------------------------------------------

                                       EXTRACTION SELECTOR

--------------------------------------------------------------------------------------------------


–û–±—Ä–∞–±–æ—Ç–∞–µ–º 3 —Å—Ç—Ä–∞–Ω–∏—Ü
üì§ –ë–µ—Ä–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–∑ –∫–µ—à–∞: https://gidro-top.ru/product/aquanet-sd-1200a-dushevaya-dver/ (–≤–æ–∑—Ä–∞—Å—Ç 1.29 —á.)

–ù–∞–π–¥–µ–Ω–æ 31 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è name

–ù–∞–π–¥–µ–Ω–æ 28 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è price
‚¨ú –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–ª–µ oldPrice: –ù–µ —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

–ù–∞–π–¥–µ–Ω–æ 25 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è article

–ù–∞–π–¥–µ–Ω–æ 102 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è brand

–ù–∞–π–¥–µ–Ω–æ 89 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è InStock_trigger
‚¨ú –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–ª–µ OutOfStock_trigger: –ù–µ —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

–ù–∞–π–¥–µ–Ω–æ 2 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è imageLink
_______________________
üì§ –ë–µ—Ä–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–∑ –∫–µ—à–∞: https://gidro-top.ru/product/aquastone-malibu-vanna-iz-iskusstvennogo-kamnya/ (–≤–æ–∑—Ä–∞—Å—Ç 1.29 —á.)

–ù–∞–π–¥–µ–Ω–æ 41 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è name

–ù–∞–π–¥–µ–Ω–æ 48 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è price

–ù–∞–π–¥–µ–Ω–æ 25 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è oldPrice

–ù–∞–π–¥–µ–Ω–æ 36 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è article

–ù–∞–π–¥–µ–Ω–æ 127 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è brand

–ù–∞–π–¥–µ–Ω–æ 96 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è InStock_trigger
‚¨ú –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–ª–µ OutOfStock_trigger: –ù–µ —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

–ù–∞–π–¥–µ–Ω–æ 3 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è imageLink
_______________________
üì§ –ë–µ—Ä–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–∑ –∫–µ—à–∞: https://gidro-top.ru/product/aquastone-bali-180/ (–≤–æ–∑—Ä–∞—Å—Ç 1.29 —á.)

–ù–∞–π–¥–µ–Ω–æ 65 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è name

–ù–∞–π–¥–µ–Ω–æ 48 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è price
‚¨ú –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–ª–µ oldPrice: –ù–µ —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

–ù–∞–π–¥–µ–Ω–æ 25 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è article

–ù–∞–π–¥–µ–Ω–æ 138 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è brand

–ù–∞–π–¥–µ–Ω–æ 84 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è InStock_trigger
‚¨ú –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–ª–µ OutOfStock_trigger: –ù–µ —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

–ù–∞–π–¥–µ–Ω–æ 3 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è imageLink
_______________________
–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è: ['name', 'price', 'oldPrice', 'article', 'brand', 'InStock_trigger', 'OutOfStock_trigger', 'imageLink']
–ö–∞–Ω–¥–∏–¥–∞—Ç—ã –ø–æ –ø–æ–ª—è–º (–≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞):
 - name: 1 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ -> ['h1.c-header.c-header_h1']
 - price: 2 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ -> ['span.price.c-product-add-to-cart__price', 'span.price.c-product-add-to-cart__price.c-product-add-to-cart__price_with-compare']
 - oldPrice: 1 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ -> ['span.c-product-add-to-cart__compare-price']
 - article: 1 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ -> ['span.c-value__value-text.c-product-cart-form__sku-value']
 - brand: 1 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ -> ['span.c-value__value-text > a.c-link']
 - InStock_trigger: 1 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ -> ['.c-product-skus-stocks__sku-stock-available > span.c-product-available.c-product-available_in-stock.c-product-available_size_s > span.l-icon-box > span.l-icon-box__content']
 - OutOfStock_trigger: 0 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ -> []
 - imageLink: 2 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ -> ['.c-product-images__thumb.c-product-images__thumb_focus[data-extend_image]', '.c-product-images__image > a.l-image-box.l-image-box_fill > span.c-lazy-image-provider[data-src]']
  [SKIP] oldPrice on https://gidro-top.ru/product/aquanet-sd-1200a-dushevaya-dver/: no expected value or no original selector
  [SKIP] oldPrice on https://gidro-top.ru/product/aquastone-bali-180/: no expected value or no original selector
[WARN] –î–ª—è –ø–æ–ª—è OutOfStock_trigger –Ω–µ –Ω–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä(—ã).

üìÑ –ö–µ—à —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ cache.json, –≤—Å–µ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü: 25
   –î–æ–±–∞–≤–ª–µ–Ω–æ: 0, –æ–±–Ω–æ–≤–ª–µ–Ω–æ: 3


‚úÖ –ò—Ç–æ–≥–æ–≤—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã:
{
    "name": [
        "h1.c-header.c-header_h1"
    ],
    "price": [
        "span.price.c-product-add-to-cart__price"
    ],
    "oldPrice": [
        "span.c-product-add-to-cart__compare-price"
    ],
    "article": [
        "span.c-value__value-text.c-product-cart-form__sku-value"
    ],
    "brand": [
        "span.c-value__value-text > a.c-link"
    ],
    "InStock_trigger": [
        ".c-product-skus-stocks__sku-stock-available > span.c-product-available.c-product-available_in-stock.c-product-available_size_s > span.l-icon-box > span.l-icon-box__content"
    ],
    "OutOfStock_trigger": [],
    "imageLink": [
        ".c-product-images__thumb.c-product-images__thumb_focus[data-extend_image]"
    ]
}



--------------------------------------------------------------------------------------------------

                                         PARSE CARD GEN

--------------------------------------------------------------------------------------------------


–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä—ã, –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º parseCard
data_input_table = 
{'host': 'https://gidro-top.ru', 'fields_str': 'name, stock, link, price, oldPrice, article, brand, imageLink, timestamp', 'links': {'simple': [{'link': 'https://gidro-top.ru/product/aquanet-sd-1200a-dushevaya-dver/', 'name': 'Aquanet SD-1200A –¥—É—à–µ–≤–∞—è –¥–≤–µ—Ä—å', 'price': '19 850 ‚ÇΩ', 'oldPrice': '', 'article': '00209406', 'brand': 'Aquanet', 'InStock_trigger': '–í –Ω–∞–ª–∏—á–∏–∏', 'OutOfStock_trigger': '', 'imageLink': 'https://gidro-top.ru/wa-data/public/shop/products/33/25/102533/images/247749/247749.440.jpg'}, {'link': 'https://gidro-top.ru/product/aquastone-malibu-vanna-iz-iskusstvennogo-kamnya/', 'name': 'Aquastone –ú–∞–ª–∏–±—É –í–∞–Ω–Ω–∞ –∏–∑ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–∞–º–Ω—è', 'price': '55 000 ‚ÇΩ', 'oldPrice': '69 000 ‚ÇΩ', 'article': 'MAlibu', 'brand': 'Aquastone', 'InStock_trigger': '–í –Ω–∞–ª–∏—á–∏–∏', 'OutOfStock_trigger': '', 'imageLink': 'https://gidro-top.ru/wa-data/public/shop/products/10/89/108910/images/274497/274497.440.jpg'}, {'link': 'https://gidro-top.ru/product/aquastone-bali-180/', 'name': 'Aquastone –ë–∞–ª–∏ 180 –í–∞–Ω–Ω–∞ –∏–∑ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–∞–º–Ω—è', 'price': '53 000 ‚ÇΩ', 'oldPrice': '', 'article': 'Bali180', 'brand': 'Aquastone', 'InStock_trigger': '–í –Ω–∞–ª–∏—á–∏–∏', 'OutOfStock_trigger': '', 'imageLink': 'https://gidro-top.ru/wa-data/public/shop/products/01/94/109401/images/352411/352411.440.jpg'}]}, 'search_requests': []}

–û–±–∞ —Ç—Ä–∏–≥–≥–µ—Ä–∞ –µ—Å—Ç—å
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä h1.c-header.c-header_h1 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ1
üí†Aquanet SD-1200A –¥—É—à–µ–≤–∞—è –¥–≤–µ—Ä—åüí†
üî∂Aquanet SD-1200A –¥—É—à–µ–≤–∞—è –¥–≤–µ—Ä—åüî∂

‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä h1.c-header.c-header_h1 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ2
üí†Aquastone –ú–∞–ª–∏–±—É –í–∞–Ω–Ω–∞ –∏–∑ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–∞–º–Ω—èüí†
üî∂Aquastone –ú–∞–ª–∏–±—É –í–∞–Ω–Ω–∞ –∏–∑ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–∞–º–Ω—èüî∂

‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä h1.c-header.c-header_h1 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ3
üí†Aquastone –ë–∞–ª–∏ 180 –í–∞–Ω–Ω–∞ –∏–∑ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–∞–º–Ω—èüí†
üî∂Aquastone –ë–∞–ª–∏ 180 –í–∞–Ω–Ω–∞ –∏–∑ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–∞–º–Ω—èüî∂

‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è
max_count_element_of_selectors = üü° 1
---
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä span.price.c-product-add-to-cart__price –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ1
üí†19 850üí†
üî∂19 850 ‚ÇΩüî∂

üí≤ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª–µ price
p1 = 19850
p2 = 19850
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä span.price.c-product-add-to-cart__price –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ2
üí†55 000üí†
üî∂55 000 ‚ÇΩüî∂

üí≤ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª–µ price
p1 = 55000
p2 = 55000
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä span.price.c-product-add-to-cart__price –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ3
üí†53 000üí†
üî∂53 000 ‚ÇΩüî∂

üí≤ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª–µ price
p1 = 53000
p2 = 53000
max_count_element_of_selectors = üü° 1
---
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä span.c-product-add-to-cart__compare-price –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ1
‚¨ú –ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —É —Å–µ–ª–µ–∫—Ç–æ—Ä–∞  –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ 1 –¥–ª—è –ø–æ–ª—è oldPrice
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä span.c-product-add-to-cart__compare-price –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ2
üí†69 000üí†
üî∂69 000 ‚ÇΩüî∂

üí≤ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª–µ oldPrice
p1 = 69000
p2 = 69000
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä span.c-product-add-to-cart__compare-price –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ3
‚¨ú –ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —É —Å–µ–ª–µ–∫—Ç–æ—Ä–∞  –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ 3 –¥–ª—è –ø–æ–ª—è oldPrice
max_count_element_of_selectors = üü° 1
---
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä span.c-value__value-text.c-product-cart-form__sku-value –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ1
üí†00209406üí†
üî∂00209406üî∂

‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä span.c-value__value-text.c-product-cart-form__sku-value –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ2
üí†MAlibuüí†
üî∂MAlibuüî∂

‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä span.c-value__value-text.c-product-cart-form__sku-value –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ3
üí†Bali180üí†
üî∂Bali180üî∂

‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è
max_count_element_of_selectors = üü° 1
---
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä span.c-value__value-text > a.c-link –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ1
üí†Aquanetüí†
üî∂Aquanetüî∂

‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä span.c-value__value-text > a.c-link –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ2
üí†Aquastoneüí†
üî∂Aquastoneüî∂

‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä span.c-value__value-text > a.c-link –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ3
üí†Aquastoneüí†
üî∂Aquastoneüî∂

‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è
max_count_element_of_selectors = üü° 1
---
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä .c-product-images__thumb.c-product-images__thumb_focus[data-extend_image] –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ1
‚¨ú –ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —É —Å–µ–ª–µ–∫—Ç–æ—Ä–∞  –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ 1 –¥–ª—è –ø–æ–ª—è imageLink
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä .c-product-images__thumb.c-product-images__thumb_focus[data-extend_image] –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ2
–í —ç–ª–µ–º–µ–Ω—Ç–µ /wa-data/public/shop/products/10/89/108910/images/274497/274497.440.jpg –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ö–æ—Å—Ç. –î–æ–±–∞–≤–ª—è–µ–º:
üí†https://gidro-top.ru/wa-data/public/shop/products/10/89/108910/images/274497/274497.440.jpgüí†
üî∂https://gidro-top.ru/wa-data/public/shop/products/10/89/108910/images/274497/274497.440.jpgüî∂

‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä .c-product-images__thumb.c-product-images__thumb_focus[data-extend_image] –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ3
–í —ç–ª–µ–º–µ–Ω—Ç–µ /wa-data/public/shop/products/01/94/109401/images/352411/352411.440.jpg –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ö–æ—Å—Ç. –î–æ–±–∞–≤–ª—è–µ–º:
üí†https://gidro-top.ru/wa-data/public/shop/products/01/94/109401/images/352411/352411.440.jpgüí†
üî∂https://gidro-top.ru/wa-data/public/shop/products/01/94/109401/images/352411/352411.440.jpgüî∂

‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è
max_count_element_of_selectors = üü° 1
---



--------------------------------------------------------------------------------------------------

                                    FINAL RESULT PARSER CODE

--------------------------------------------------------------------------------------------------


import { getDefaultConf, defaultEditableConf, defaultOpts, getCacher } from "../Base-Custom/Constants";
import { AsyncHTTPXRequestOptsCustom, defaultConf, editableConf, Item } from "../Base-Custom/Types";
import { InvalidLinkError, NotFoundError } from "../Base-Custom/Errors";
import { JS_Base_Custom } from "../Base-Custom/Base-Custom";
import { getTimestamp } from "../Base-Custom/Utils";
import { SetType, tools } from "a-parser-types";
import { Cacher } from "../Base-Custom/Cache";
import {
    toArray, isBadLink,
    name, stock, link, price, oldPrice, article, brand, imageLink, timestamp
} from "../Base-Custom/Fields"
import * as cheerio from "cheerio";

//#region –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
type ResultItem = Item<typeof fields>

//#region –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
const fields = {
    name, stock, link, price, oldPrice, article, brand, imageLink, timestamp
}

const HOST = "https://gidro-top.ru"

export class JS_Base_ extends JS_Base_Custom {
    static defaultConf: defaultConf = {
            ...getDefaultConf(toArray(fields), "Œ∂", [isBadLink]),
            parsecodes: { 200: 1, 404: 1 },
            proxyChecker: "tor.proxy.ru",
            requestdelay: "3,5",
            engine: "a-parser",
            mode: "normal",
        };

    static editableConf: editableConf = [
        ...defaultEditableConf
    ];

    //#region –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
    async parse(set: SetType, results: { [key: string]: any }) {
        if (!set.type || set.type === "none") set.type = "page";
        if (!set.region || set.region === "none") set.region = "";
        try {
            switch (set.type) {
                case "page": {
                    if (!set.page || set.page === "none") set.page = 1;
                    await this.parsePage(set);
                    results.success = 1;
                    break;
                }
                case "card": {
                    const cacher = getCacher<ResultItem>(this, set)
                    let items = cacher.cache || await this.parseCard(set, cacher);
                    items.forEach(item => results.items.addElement(item));
                    results.success = 1;
                    break;
                }
                default:
                    this.logger.put("–£–∫–∞–∑–∞–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø —Å–±–æ—Ä–∞")
                    results.success = 0;
            }
        } catch (e) {
            if (e instanceof NotFoundError || e instanceof InvalidLinkError) {
                this.logger.put(e.message);
                results.isBadLink = 1;
                results.success = 1;
            } else {
                this.logger.put(`${e.name} >> ${e.message}   ${set.query}  type - ${set.type} page ${set.page} }`);
                results.success = 0;
            }
        }
        return results;
    }

    //#region –ü–∞—Ä—Å–∏–Ω–≥ –ø–æ–∏—Å–∫–∞
    

    //#region –ü–∞—Ä—Å–∏–Ω–≥ —Ç–æ–≤–∞—Ä–∞
    async parseCard(set: SetType, cacher: Cacher<ResultItem[]>) {
        let items: ResultItem[] = []

        const data = await this.makeRequest(set.query);
        const $ = cheerio.load(data);

        const name = $("h1.c-header.c-header_h1").text()?.trim()
		const stock = $(".c-product-skus-stocks__sku-stock-available > span.c-product-available.c-product-available_in-stock.c-product-available_size_s > span.l-icon-box > span.l-icon-box__content").text()?.includes("–í –Ω–∞–ª–∏—á–∏–∏") ? "InStock" : "OutOfStock"
		const link = set.query
		const price = $("span.price.c-product-add-to-cart__price").text()?.trim().formatPrice()
		const oldPrice = $("span.c-product-add-to-cart__compare-price").text()?.trim().formatPrice()
		const article = $("span.c-value__value-text.c-product-cart-form__sku-value").text()?.trim()
		const brand = $("span.c-value__value-text > a.c-link").text()?.trim()
		const imageLink = $(".c-product-images__thumb.c-product-images__thumb_focus")?.attr("data-extend_image")?.trim() ? HOST + $(".c-product-images__thumb.c-product-images__thumb_focus")?.attr("data-extend_image")?.trim() : ""
        const timestamp = getTimestamp()

        const item: ResultItem = {
            name, stock, link, price, oldPrice, article, brand, imageLink, timestamp
        }
        items.push(item);

        cacher.cache = items
        return items;
    }

    //#region –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
    async makeRequest(url: string) {
        const opts: AsyncHTTPXRequestOptsCustom = {
            ...defaultOpts,
            engine: this.conf.engine,
            mode: this.conf.mode,
        };
        this.debugger.put(opts)

        const { success, headers, data } = await this.request("GET", url, {}, opts);
        this.debugger.put(data)

        if (!success || typeof data !== "string") throw new Error("–ù–µ—É–¥–∞—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å");
        if (headers.Status === 404) throw new NotFoundError();

        return data;
    }
}

// –ö–æ–¥ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω APSP v0.1
// –î–∞—Ç–∞: 9 –î–µ–∫ 2025
// ¬© BrandPol
