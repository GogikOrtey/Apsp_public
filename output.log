12.12.2025 15:16:05




--------------------------------------------------------------------------------------------------

                                        GLOBAL CODE GEN

--------------------------------------------------------------------------------------------------


field = name, stock, link, price, oldprice, article, brand, imageLink, timestamp



--------------------------------------------------------------------------------------------------

                                       EXTRACTION SELECTOR

--------------------------------------------------------------------------------------------------


–û–±—Ä–∞–±–æ—Ç–∞–µ–º 3 —Å—Ç—Ä–∞–Ω–∏—Ü
üì§ –ë–µ—Ä–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–∑ –∫–µ—à–∞: https://cosmofun.ru/product/maska_anti_stress_dlya_volos_i_kozhi_golovy_the_wake_up_circle_1/ (–≤–æ–∑—Ä–∞—Å—Ç 14.71 —á.)

–ù–∞–π–¥–µ–Ω–æ 7 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bxr-page-content > div.bxr-b20.col-xs-12 > div.row > div.col-xl-12.col-xs-12.bxr-container-catalog-element > div.bxr-cloud-all > h1
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: h1
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è name

–ù–∞–π–¥–µ–Ω–æ 2 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bx_117848907_24289_prices_wrap_main > div.bxr-detail-price-name-wrap > div.bxr-detail-price
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: div.bxr-detail-price
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è price

–ù–∞–π–¥–µ–Ω–æ 1 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bx_117848907_24289_prices_wrap_main > div.bxr-detail-price-name-wrap > div.bxr-detail-old-price
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: div.bxr-detail-old-price
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è oldprice


–ù–∞–π–¥–µ–Ω–æ 14 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bxr-page-content > div.bxr-b20.col-xs-12 > div.row > div.col-xl-12.col-xs-12.bxr-container-catalog-element > div.bxr-cloud-all > div.row.detail-offer > div.col-xl-4.col-lg-5.col-md-6.col-sm-6.col-xs-12.bxr-preview-detail-col > div.bxr-detail-col > div.detail-items > div:nth-of-type(4)
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: div.detail-items > div:nth-of-type(4)
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è article

–ù–∞–π–¥–µ–Ω–æ 3 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bxr-page-content > div.bxr-b20.col-xs-12 > div.row > div.col-xl-12.col-xs-12.bxr-container-catalog-element > div.bxr-cloud-all > div.row.detail-offer > div.col-xl-4.col-lg-5.col-md-6.col-sm-6.col-xs-12.bxr-preview-detail-col > div.bxr-detail-col > div.detail-items > div:nth-of-type(1) > a.js-brand
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: a.js-brand
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è brand
‚¨ú –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–ª–µ InStock_trigger: –ù–µ —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
‚¨ú –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–ª–µ OutOfStock_trigger: –ù–µ —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

–ù–∞–π–¥–µ–Ω–æ 2 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bx_117848907_24289_main_photo[href]
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bx_117848907_24289_main_photo[href]
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è imageLink
_______________________
üì§ –ë–µ—Ä–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–∑ –∫–µ—à–∞: https://cosmofun.ru/product/krem_regenyal/ (–≤–æ–∑—Ä–∞—Å—Ç 14.71 —á.)

–ù–∞–π–¥–µ–Ω–æ 7 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bxr-page-content > div.bxr-b20.col-xs-12 > div.row > div.col-xl-12.col-xs-12.bxr-container-catalog-element > div.bxr-cloud-all > h1
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: h1
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è name

–ù–∞–π–¥–µ–Ω–æ 2 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bx_117848907_15343_prices_wrap_main > div.bxr-detail-price-name-wrap > div.bxr-detail-price
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: div.bxr-detail-price
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è price
‚¨ú –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–ª–µ oldprice: –ù–µ —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ


–ù–∞–π–¥–µ–Ω–æ 14 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bxr-page-content > div.bxr-b20.col-xs-12 > div.row > div.col-xl-12.col-xs-12.bxr-container-catalog-element > div.bxr-cloud-all > div.row.detail-offer > div.col-xl-4.col-lg-5.col-md-6.col-sm-6.col-xs-12.bxr-preview-detail-col > div.bxr-detail-col > div.detail-items > div:nth-of-type(3)
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: div.detail-items > div:nth-of-type(3)
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è article

–ù–∞–π–¥–µ–Ω–æ 5 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bxr-element-name-12622 > div.brand-list > a
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: div.brand-list > a
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è brand
‚¨ú –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–ª–µ InStock_trigger: –ù–µ —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
‚¨ú –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–ª–µ OutOfStock_trigger: –ù–µ —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

–ù–∞–π–¥–µ–Ω–æ 2 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bx_117848907_15343_main_photo[href]
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bx_117848907_15343_main_photo[href]
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è imageLink
_______________________
üì§ –ë–µ—Ä–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–∑ –∫–µ—à–∞: https://cosmofun.ru/product/osvetlyayushchaya_pudra_ub_freedom_blonde_1/ (–≤–æ–∑—Ä–∞—Å—Ç 14.71 —á.)

–ù–∞–π–¥–µ–Ω–æ 7 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bxr-page-content > div.bxr-b20.col-xs-12 > div.row > div.col-xl-12.col-xs-12.bxr-container-catalog-element > div.bxr-cloud-all > h1
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: h1
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è name

–ù–∞–π–¥–µ–Ω–æ 2 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bx_117848907_26780_prices_wrap_main > div.bxr-detail-price-name-wrap > div.bxr-detail-price
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: div.bxr-detail-price
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è price

–ù–∞–π–¥–µ–Ω–æ 1 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bx_117848907_26780_prices_wrap_main > div.bxr-detail-price-name-wrap > div.bxr-detail-old-price
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: div.bxr-detail-old-price
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è oldprice

–ù–∞–π–¥–µ–Ω–æ 10 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bxr-multilevel-menu > li.content-child > ul > li.parent[data-child]
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bxr-multilevel-menu > li.content-child > ul > li.parent[data-child]
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è article

–ù–∞–π–¥–µ–Ω–æ 3 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bxr-page-content > div.bxr-b20.col-xs-12 > div.row > div.col-xl-12.col-xs-12.bxr-container-catalog-element > div.bxr-cloud-all > div.row.detail-offer > div.col-xl-4.col-lg-5.col-md-6.col-sm-6.col-xs-12.bxr-preview-detail-col > div.bxr-detail-col > div.detail-items > div:nth-of-type(1) > a.js-brand
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: a.js-brand
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è brand
‚¨ú –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–ª–µ InStock_trigger: –ù–µ —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
‚¨ú –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–ª–µ OutOfStock_trigger: –ù–µ —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

–ù–∞–π–¥–µ–Ω–æ 2 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bx_117848907_26780_main_photo[href]
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bx_117848907_26780_main_photo[href]
–ù–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø–æ–ª—è imageLink
_______________________
–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è: ['name', 'price', 'oldprice', 'article', 'brand', 'InStock_trigger', 'OutOfStock_trigger', 'imageLink']
–ö–∞–Ω–¥–∏–¥–∞—Ç—ã –ø–æ –ø–æ–ª—è–º (–≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞):
 - name: 1 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ -> ['h1']
 - price: 1 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ -> ['.bxr-detail-price']
 - oldprice: 1 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ -> ['.bxr-detail-old-price']
 - article: 3 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ -> ['.detail-items > div:nth-of-type(4)', '.detail-items > div:nth-of-type(3)', '#bxr-multilevel-menu > li.content-child > ul > li.parent[data-child]']
 - brand: 2 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ -> ['a.js-brand', '.brand-list > a']
 - InStock_trigger: 0 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ -> []
 - OutOfStock_trigger: 0 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ -> []
 - imageLink: 3 —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ -> ['#bx_117848907_24289_main_photo[href]', '#bx_117848907_15343_main_photo[href]', '#bx_117848907_26780_main_photo[href]']
  [SKIP] oldprice on https://cosmofun.ru/product/krem_regenyal/: no expected value or no original selector
[WARN] –î–ª—è –ø–æ–ª—è InStock_trigger –Ω–µ –Ω–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä(—ã).
[WARN] –î–ª—è –ø–æ–ª—è OutOfStock_trigger –Ω–µ –Ω–∞–π–¥–µ–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä(—ã).

üìÑ –ö–µ—à —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ cache.json, –≤—Å–µ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü: 57
   –î–æ–±–∞–≤–ª–µ–Ω–æ: 0, –æ–±–Ω–æ–≤–ª–µ–Ω–æ: 3


‚úÖ –ò—Ç–æ–≥–æ–≤—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã:
{
    "name": [
        "h1"
    ],
    "price": [
        ".bxr-detail-price"
    ],
    "oldprice": [
        ".bxr-detail-old-price"
    ],
    "article": [
        ".detail-items > div:nth-of-type(4)"
    ],
    "brand": [
        "a.js-brand"
    ],
    "InStock_trigger": [],
    "OutOfStock_trigger": [],
    "imageLink": [
        "#bx_117848907_24289_main_photo[href]"
    ]
}



--------------------------------------------------------------------------------------------------

                                         PARSE CARD GEN

--------------------------------------------------------------------------------------------------


–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä—ã, –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º parseCard
–û–±–∞ —Ç—Ä–∏–≥–≥–µ—Ä–∞ –µ—Å—Ç—å
–û–Ω–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ, –∏—Å–ø–æ–ª—å–∑—É–µ–º InStock
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª–µ name

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä h1 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ1
##### result_selector = {'result': '–ú–∞—Å–∫–∞ –∞–Ω—Ç–∏-—Å—Ç—Ä–µ—Å—Å –¥–ª—è –≤–æ–ª–æ—Å –∏ –∫–æ–∂–∏ –≥–æ–ª–æ–≤—ã The Wake-Up Circle', 'length_elem': 1}
    –ú–∞—Å–∫–∞ –∞–Ω—Ç–∏-—Å—Ç—Ä–µ—Å—Å –¥–ª—è –≤–æ–ª–æ—Å –∏ –∫–æ–∂–∏ –≥–æ–ª–æ–≤—ã The Wake-Up Circle
    –ú–∞—Å–∫–∞ –∞–Ω—Ç–∏-—Å—Ç—Ä–µ—Å—Å –¥–ª—è –≤–æ–ª–æ—Å –∏ –∫–æ–∂–∏ –≥–æ–ª–æ–≤—ã The Wake-Up Circle

    ‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è name

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä h1 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ2
##### result_selector = {'result': '–ö—Ä–µ–º Regenyal', 'length_elem': 1}
    –ö—Ä–µ–º Regenyal
    –ö—Ä–µ–º Regenyal

    ‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è name

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä h1 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ3
##### result_selector = {'result': '–û—Å–≤–µ—Ç–ª—è—é—â–∞—è –ø—É–¥—Ä–∞ Ub freedom blonde', 'length_elem': 1}
    –û—Å–≤–µ—Ç–ª—è—é—â–∞—è –ø—É–¥—Ä–∞ Ub freedom blonde
    –û—Å–≤–µ—Ç–ª—è—é—â–∞—è –ø—É–¥—Ä–∞ Ub freedom blonde

    ‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è name

max_count_element_of_selectors = üü° 1
_____

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª–µ price

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä .bxr-detail-price –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ1
##### result_selector = {'result': '4 420', 'length_elem': 1}
    4 420
    4 420

    üí≤ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª–µ price
    –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å - —Ç–æ—á–∫–∞

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä .bxr-detail-price –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ2
##### result_selector = {'result': '4 200', 'length_elem': 1}
    4 200
    4 200

    üí≤ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª–µ price
    –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å - —Ç–æ—á–∫–∞

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä .bxr-detail-price –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ3
##### result_selector = {'result': '4 292', 'length_elem': 1}
    4 292
    4 292

    üí≤ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª–µ price
    –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å - —Ç–æ—á–∫–∞

max_count_element_of_selectors = üü° 1
_____

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª–µ oldprice

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä .bxr-detail-old-price –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ1
##### result_selector = {'result': '5 200 —Ä—É–±.', 'length_elem': 1}
    5 200 —Ä—É–±.
    5 200 —Ä—É–±.

    üí≤ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª–µ oldprice
    p1 = 5200.
    p2 = 5200
    –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å - –∑–∞–ø—è—Ç–∞—è

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä .bxr-detail-old-price –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ2
##### result_selector = {'result': '', 'length_elem': 0}
    ‚¨ú –ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —É —Å–µ–ª–µ–∫—Ç–æ—Ä–∞  –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ 2 –¥–ª—è –ø–æ–ª—è oldprice

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä .bxr-detail-old-price –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ3
##### result_selector = {'result': '4 517 —Ä—É–±.', 'length_elem': 1}
    4 517 —Ä—É–±.
    4 517 —Ä—É–±.

    üí≤ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª–µ oldprice
    p1 = 4517.
    p2 = 4517
    –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å - –∑–∞–ø—è—Ç–∞—è

max_count_element_of_selectors = üü° 1
_____

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª–µ article

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä .detail-items > div:nth-of-type(4) –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ1
##### result_selector = {'result': '–ê—Ä—Ç–∏–∫—É–ª: 77005', 'length_elem': 1}
    –ê—Ä—Ç–∏–∫—É–ª: 77005
    77005

    üü® –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä .detail-items > div:nth-of-type(4) –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ2
##### result_selector = {'result': '', 'length_elem': 0}
    ‚¨ú –ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —É —Å–µ–ª–µ–∫—Ç–æ—Ä–∞  –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ 2 –¥–ª—è –ø–æ–ª—è article

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä .detail-items > div:nth-of-type(4) –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ3
##### result_selector = {'result': '–ê—Ä—Ç–∏–∫—É–ª: 16428', 'length_elem': 1}
    –ê—Ä—Ç–∏–∫—É–ª: 16428
    16428

    üü® –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ

max_count_element_of_selectors = üü° 1
_____

üß¢ –û—Ç–ø—Ä–∞–≤–ª—è—é –∑–∞–ø—Ä–æ—Å –∫ –ò–ò –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ –¥–ª—è –ø–æ–ª—è article
–ü–æ—Å—ã–ª–∞—é –∑–∞–ø—Ä–æ—Å –∫ YandexGPT:

üí´ PROMPT:
–ï—Å—Ç—å —Ç–∞–∫–æ–π –∫–æ–¥ –Ω–∞ JS: 
const article = $(".detail-items > div:nth-of-type(4)").text()?.trim()
–û–¥–Ω–∞–∫–æ –æ–Ω –∏–∑–≤–ª–µ–∫–∞–µ—Ç "–ê—Ä—Ç–∏–∫—É–ª: 77005"
–ê –¥–æ–ª–∂–µ–Ω –∏–∑–≤–ª–µ–∫–∞—Ç—å: "77005"

–ò–∑–º–µ–Ω–∏ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥, —á—Ç–æ –±—ã –æ–Ω –¥–µ–ª–∞–ª —ç—Ç–æ.
–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
‚Äî –î–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Ü–µ–ø–æ—á–∫—É ?. –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ—Å—Ç–æ . 
‚Äî –û–¥–Ω–∞–∫–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ .match .replace –∏ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–¥–æ–±–Ω—ã–µ
‚Äî –ï—Å–ª–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø –∫ —ç–ª–µ–º–µ–Ω—Ç—É –º–∞—Å—Å–∏–≤–∞ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ ?.at(i) –≤–º–µ—Å—Ç–æ –∏–Ω–¥–µ–∫—Å–Ω–æ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è
‚Äî –ù–∏–∫–∞–∫–∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, –ø–æ—è—Å–Ω–µ–Ω–∏–π, –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏ —Ç–µ–∫—Å—Ç–∞ –≤–æ–∫—Ä—É–≥ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–¥–∞–π —Ç–æ–ª—å–∫–æ —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç—Ä–æ–∫—É –∏–ª–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞.
    


üí¨ AI ANSWER:
"```
const article = $(".detail-items > div:nth-of-type(4)").text()?.trim()?.replace(/^[^\d]+(\d+).*/, '$1');
```"

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª–µ brand

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä a.js-brand –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ1
##### result_selector = {'result': 'Davines', 'length_elem': 1}
    Davines
    Davines

    ‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è brand

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä a.js-brand –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ2
##### result_selector = {'result': 'Sweet Skin System', 'length_elem': 1}
    Sweet Skin System
    Sweet Skin System

    ‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è brand

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä a.js-brand –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ3
##### result_selector = {'result': 'Keune', 'length_elem': 1}
    Keune
    Keune

    ‚úÖ –ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è brand

max_count_element_of_selectors = üü° 1
_____

–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª–µ imageLink

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä #bx_117848907_24289_main_photo[href] –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ1
##### result_selector = {'result': '/upload/ammina.optimizer/png/q75/upload/iblock/4ad/4ad0c878cdbacb73a7c8f40ac12ce3a8.png', 'length_elem': 1}
    –í —ç–ª–µ–º–µ–Ω—Ç–µ /upload/ammina.optimizer/png/q75/upload/iblock/4ad/4ad0c878cdbacb73a7c8f40ac12ce3a8.png –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ö–æ—Å—Ç. –î–æ–±–∞–≤–ª—è–µ–º:
    https://cosmofun.ru/upload/ammina.optimizer/png/q75/upload/iblock/4ad/4ad0c878cdbacb73a7c8f40ac12ce3a8.png
    https://cosmofun.ru/upload/ammina.optimizer/png-webp/q80/upload/iblock/4ad/4ad0c878cdbacb73a7c8f40ac12ce3a8.webp

    üü® –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä #bx_117848907_24289_main_photo[href] –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ2
##### result_selector = {'result': '', 'length_elem': 0}
    ‚¨ú –ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —É —Å–µ–ª–µ–∫—Ç–æ—Ä–∞  –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ 2 –¥–ª—è –ø–æ–ª—è imageLink

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä #bx_117848907_24289_main_photo[href] –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Ññ3
##### result_selector = {'result': '', 'length_elem': 0}
    ‚¨ú –ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —É —Å–µ–ª–µ–∫—Ç–æ—Ä–∞  –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ 3 –¥–ª—è –ø–æ–ª—è imageLink

max_count_element_of_selectors = üü° 1
_____

üß¢ –û—Ç–ø—Ä–∞–≤–ª—è—é –∑–∞–ø—Ä–æ—Å –∫ –ò–ò –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ –¥–ª—è –ø–æ–ª—è imageLink
–ü–æ—Å—ã–ª–∞—é –∑–∞–ø—Ä–æ—Å –∫ YandexGPT:

üí´ PROMPT:
–ï—Å—Ç—å —Ç–∞–∫–æ–π –∫–æ–¥ –Ω–∞ JS: 
                let imageLink = $("#bx_117848907_24289_main_photo")?.attr("href")?.trim()
		imageLink = imageLink ? HOST + imageLink : ""
                –û–¥–Ω–∞–∫–æ –æ–Ω –∏–∑–≤–ª–µ–∫–∞–µ—Ç "https://cosmofun.ru/upload/ammina.optimizer/png/q75/upload/iblock/4ad/4ad0c878cdbacb73a7c8f40ac12ce3a8.png"
                –ê –¥–æ–ª–∂–µ–Ω –∏–∑–≤–ª–µ–∫–∞—Ç—å: "https://cosmofun.ru/upload/ammina.optimizer/png-webp/q80/upload/iblock/4ad/4ad0c878cdbacb73a7c8f40ac12ce3a8.webp"
                –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è HOST = https://cosmofun.ru
                –ò–∑–º–µ–Ω–∏ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥, —á—Ç–æ –±—ã –æ–Ω –¥–µ–ª–∞–ª —ç—Ç–æ.
–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
‚Äî –î–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Ü–µ–ø–æ—á–∫—É ?. –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ—Å—Ç–æ . 
‚Äî –û–¥–Ω–∞–∫–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ .match .replace –∏ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–¥–æ–±–Ω—ã–µ
‚Äî –ï—Å–ª–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø –∫ —ç–ª–µ–º–µ–Ω—Ç—É –º–∞—Å—Å–∏–≤–∞ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ ?.at(i) –≤–º–µ—Å—Ç–æ –∏–Ω–¥–µ–∫—Å–Ω–æ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è
‚Äî –ù–∏–∫–∞–∫–∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, –ø–æ—è—Å–Ω–µ–Ω–∏–π, –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏ —Ç–µ–∫—Å—Ç–∞ –≤–æ–∫—Ä—É–≥ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–¥–∞–π —Ç–æ–ª—å–∫–æ —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç—Ä–æ–∫—É –∏–ª–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞.
    


üí¨ AI ANSWER:
"```
let imageLink = $("#bx_117848907_24289_main_photo")?.attr("href")?.trim()?.replace(/png$/, 'png-webp');
imageLink = imageLink ? HOST + imageLink : "";
```"

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤:
üü©: name 
üí≤ : price 
üí≤ : oldprice 
üü®: article  üß¢ use –ò–ò
üü©: brand 
üü®: imageLink  üß¢ use –ò–ò




--------------------------------------------------------------------------------------------------

                                         PARSE PAGE GEN

--------------------------------------------------------------------------------------------------


üüß timestamp –Ω–µ—Ç –≤ –º–∞—Å—Å–∏–≤–µ, –¥–∞–Ω–Ω—ã–µ –¥–ª—è parsePage –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏
–ü–æ—Å—ã–ª–∞—é –∑–∞–ø—Ä–æ—Å –∫ YandexGPT:

üí´ PROMPT:
–¢–µ–±–µ –Ω—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç URL –∞–¥—Ä–µ—Å –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–∞. –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–∞–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:

let url = new URL(`${HOST}/search`)
url.searchParams.set("q", set.query)
url.searchParams.set("page", set.page)

–¢–≤–æ—è –∑–∞–¥–∞—á–∞: –í—ã—à–µ –≤ –∫–æ–¥–µ –∑–∞–¥–∞–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ set.query - —ç—Ç–æ —Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –ø–æ–∏—Å–∫, –∏ set.page - —ç—Ç–æ —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∏—Å–∫–∞, –æ–Ω–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 1. –¢–µ–±–µ –Ω—É–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –∏ –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞ –Ω–∞ JS, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å—Å—è URL —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç—Ç–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –ß–∞—â–µ –≤—Å–µ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ –∏ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–¥–∞—é—Ç—Å—è –≤ searchParams, –Ω–æ –∏–Ω–æ–≥–¥–∞ –æ–Ω–∏ –∑–∞–¥–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ —Å—Ç—Ä–æ–∫–µ URL, –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Å `${}`. –¢–∞–∫–∂–µ, –≤ –∏—Å—Ö–æ–¥–Ω–æ–º URL –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–¥–∞–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å –∏ —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –≤—Å–µ —ç—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å.

–ü—Ä–∏–º–µ—Ä 1:
–°—Ç—Ä–æ–∫–∞ –Ω–∞ –ø–æ–∏—Å–∫ —É —Å–∞–π—Ç–∞, –Ω–∞ 2—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–∏—Å–∫–∞: 
https://galen.bg/catalogsearch/result/index/?p=2&q=–º–ª

–§—Ä–∞–≥–º–µ–Ω—Ç —Å —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º URL:
let url = new URL(`${HOST}/catalogsearch/result/index/`)
url.searchParams.set("q", set.query)
url.searchParams.set("p", set.page)

–ü—Ä–∏–º–µ—Ä 2:
–°—Ç—Ä–æ–∫–∞ –Ω–∞ –ø–æ–∏—Å–∫ —É —Å–∞–π—Ç–∞, –Ω–∞ 2—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–∏—Å–∫–∞: 
https://stroytorg812.ru/content/search/?s=&q=–í–∞–Ω–Ω–∞&PAGEN_1=2

–§—Ä–∞–≥–º–µ–Ω—Ç —Å —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º URL:
let url = new URL(`${HOST}/content/search/`)
url.searchParams.set("s", "")
url.searchParams.set("q", set.query)
url.searchParams.set("PAGEN_1", set.page)


–ü—Ä–∏–º–µ—Ä 3:
–°—Ç—Ä–æ–∫–∞ –Ω–∞ –ø–æ–∏—Å–∫ —É —Å–∞–π—Ç–∞, –Ω–∞ 2—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–∏—Å–∫–∞: 
https://gidro-top.ru/search/–í–∞–Ω–Ω–∞/?page=2

–§—Ä–∞–≥–º–µ–Ω—Ç —Å —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º URL:
let url = new URL(`${HOST}/search/${set.query}/`)
url.searchParams.set('/?page', set.page);

-----

–¢–µ–∫—É—â–µ–µ –∑–∞–¥–∞–Ω–∏–µ:
–°—Ç—Ä–æ–∫–∞ –Ω–∞ –ø–æ–∏—Å–∫ —É —Å–∞–π—Ç–∞, –Ω–∞ 2—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–∏—Å–∫–∞: https://cosmofun.ru/search/index.php?q=%D0%B2%D0%BE%D0%BB%D0%BE%D1%81&s=&PAGEN_3=2

–ó–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π HOST = https://cosmofun.ru

–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ: –ù–∏–∫–∞–∫–∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, –ø–æ—è—Å–Ω–µ–Ω–∏–π, –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏ —Ç–µ–∫—Å—Ç–∞ –≤–æ–∫—Ä—É–≥ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–¥–∞–π —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞ - –§—Ä–∞–≥–º–µ–Ω—Ç —Å —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º URL.


üí¨ AI ANSWER:
"```
let url = new URL(`${HOST}/search/index.php`)
url.searchParams.set("q", set.query)
url.searchParams.set("s", "")
url.searchParams.set("PAGEN_3", set.page)
```"

processed_url_product = /product/balzam_dlya_volos_hc_luxury_repair/

–ù–∞–π–¥–µ–Ω–æ 4 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bx_1877656419_9775_e0543db0da0d6c005d17ab7bc29d948f > div.bxr-element-container > div.bxr-element-image.bxr-img-container > a.bxr-item-image-wrap.js-product[href]
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bx_1877656419_9775_e0543db0da0d6c005d17ab7bc29d948f > div.bxr-element-container > div.bxr-element-image.bxr-img-container > a.bxr-item-image-wrap.js-product[href]
–ò—Å—Ö–æ–¥–Ω—ã–π —Å–µ–ª–µ–∫—Ç–æ—Ä: #bx_1877656419_9775_e0543db0da0d6c005d17ab7bc29d948f > div.bxr-element-container > div.bxr-element-image.bxr-img-container > a.bxr-item-image-wrap.js-product[href]
–ß–∞—Å—Ç–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞: ['#bx_1877656419_9775_e0543db0da0d6c005d17ab7bc29d948f>', 'div.bxr-element-container>', 'div.bxr-element-image.bxr-img-container>', 'a.bxr-item-image-wrap.js-product[href]']
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å—Ç–µ–π: 4

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä: #bx_1877656419_9775_e0543db0da0d6c005d17ab7bc29d948f > div.bxr-element-container > div.bxr-element-image.bxr-img-container > a.bxr-item-image-wrap.js-product[href]
–ù–∞–π–¥–µ–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤: 1

–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä: div.bxr-element-container > div.bxr-element-image.bxr-img-container > a.bxr-item-image-wrap.js-product[href]
–ù–∞–π–¥–µ–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤: 36
‚úÖ –ù–∞–π–¥–µ–Ω –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Å–µ–ª–µ–∫—Ç–æ—Ä: div.bxr-element-container > div.bxr-element-image.bxr-img-container > a.bxr-item-image-wrap.js-product[href]

–ò—Ç–æ–≥–æ–≤—ã–π product_selector = a.bxr-item-image-wrap.js-product[href]
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ –∏—Ç–æ–≥–æ–≤–æ–º—É —Å–µ–ª–µ–∫—Ç–æ—Ä—É: 36
len_of_products_on_this_page = 36
–°—Å—ã–ª–æ–∫ –ø–æ —Å–µ–ª–µ–∫—Ç–æ—Ä—É: 36
–°–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ = 1.00 (3/3)
–ò–∑–≤–ª–µ–∫–∞–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä –∫–æ–ª-–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü

–ù–∞–π–¥–µ–Ω–æ 166 –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –¥–æ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: #bxr-page-content > div.col-lg-12.col-md-12.col-sm-12.col-xs-12 > div.bxr-template-container.bxr-cloud-all.bxr-cloud-padding.bxr-b20 > div.bxr-cloud-all.bxr-cloud-padding > div.search-page > div:nth-of-type(2) > div.navigation > div.navigation-pages > a.bxr-font-color
üî∂ –°–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Å–ª–µ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏: div.navigation-pages > a.bxr-font-color
pagination_selctor = div.navigation-pages > a.bxr-font-color
–ü—Ä–æ–≤–µ—Ä–∏–ª–∏, –∏ –Ω–∞—à–ª–∏ —Ç–∞–∫–æ–π —ç–ª–µ–º–µ–Ω—Ç –ø–æ –Ω–∞–π–¥–µ–Ω–Ω–æ–º—É —Å–µ–ª–µ–∫—Ç–æ—Ä—É –ø–∞–≥–∏–Ω–∞—Ü–∏–∏: 1
async parsePage(set: SetType) {
        let url = new URL(`${HOST}/search/index.php`)
		url.searchParams.set("q", set.query)
		url.searchParams.set("s", "")
		url.searchParams.set("PAGEN_3", set.page)

        const data = await this.makeRequest(url.href)
        const $ = cheerio.load(data)

        if (set.page === 1) {
            let totalPages = Math.max(...$("div.navigation-pages > a.bxr-font-color").get().map(item => +$(item).text().trim()).filter(Boolean)) 
            this.debugger.put(`totalPages = ${totalPages}`)
            for (let page = 2; page <= Math.min(totalPages, +this.conf.pagesCount); page++) {
                this.query.add({ ...set, query: set.query, type: "page", page: page, lvl: 1 });
            }
        }
        
        let products = $("a.bxr-item-image-wrap.js-product[href]") 
        if (products.length == 0) {
            this.logger.put(`–ü–æ –∑–∞–ø—Ä–æ—Å—É ${set.query} –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ`)
            throw new NotFoundError()
        }
        products.slice(0, +this.conf.itemsCount).each((i, product) => {
            let link = `${HOST}${$(product)?.attr("href")}`
            this.query.add({ ...set, query: link, type: "card", lvl: 1 })
        }) 
    }
–ò–º—è –ø–∞—Ä—Å–µ—Ä–∞: JS_Base_cosmofunru



--------------------------------------------------------------------------------------------------

                                    FINAL RESULT PARSER CODE

--------------------------------------------------------------------------------------------------



üìó –†–µ–∑—É–ª—å—Ç–∞—Ç:

import { getDefaultConf, defaultEditableConf, defaultOpts, getCacher } from "../Base-Custom/Constants";
import { AsyncHTTPXRequestOptsCustom, defaultConf, editableConf, Item } from "../Base-Custom/Types";
import { InvalidLinkError, NotFoundError } from "../Base-Custom/Errors";
import { JS_Base_Custom } from "../Base-Custom/Base-Custom";
import { getTimestamp } from "../Base-Custom/Utils";
import { SetType, tools } from "a-parser-types";
import { Cacher } from "../Base-Custom/Cache";
import {
    toArray, isBadLink,
    name, stock, link, price, oldprice, article, brand, imageLink, timestamp
} from "../Base-Custom/Fields"
import * as cheerio from "cheerio";

//#region –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
type ResultItem = Item<typeof fields>

//#region –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
const fields = {
    name, stock, link, price, oldprice, article, brand, imageLink, timestamp
}

const HOST = "https://cosmofun.ru"

export class JS_Base_cosmofunru extends JS_Base_Custom {
    static defaultConf: defaultConf = {
            ...getDefaultConf(toArray(fields), "Œ∂", [isBadLink]),
            parsecodes: { 200: 1, 404: 1 },
            proxyChecker: "tor.proxy.ru",
            requestdelay: "3,5",
            engine: "a-parser",
            mode: "normal",
        };

    static editableConf: editableConf = [
        ...defaultEditableConf
    ];

    //#region –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
    async parse(set: SetType, results: { [key: string]: any }) {
        if (!set.type || set.type === "none") set.type = "page";
        if (!set.region || set.region === "none") set.region = "";
        try {
            switch (set.type) {
                case "page": {
                    if (!set.page || set.page === "none") set.page = 1;
                    await this.parsePage(set);
                    results.success = 1;
                    break;
                }
                case "card": {
                    const cacher = getCacher<ResultItem>(this, set)
                    let items = cacher.cache || await this.parseCard(set, cacher);
                    items.forEach(item => results.items.addElement(item));
                    results.success = 1;
                    break;
                }
                default:
                    this.logger.put("–£–∫–∞–∑–∞–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø —Å–±–æ—Ä–∞")
                    results.success = 0;
            }
        } catch (e: any) {
            if (e instanceof NotFoundError || e instanceof InvalidLinkError) {
                this.logger.put(e.message);
                results.isBadLink = 1;
                results.success = 1;
            } else {
                this.logger.put(`${e.name} >> ${e.message}   ${set.query}  type - ${set.type} page ${set.page} }`);
                results.success = 0;
            }
        }
        return results;
    }

    //#region –ü–∞—Ä—Å–∏–Ω–≥ –ø–æ–∏—Å–∫–∞
    async parsePage(set: SetType) {
        let url = new URL(`${HOST}/search/index.php`)
		url.searchParams.set("q", set.query)
		url.searchParams.set("s", "")
		url.searchParams.set("PAGEN_3", set.page)

        const data = await this.makeRequest(url.href)
        const $ = cheerio.load(data)

        if (set.page === 1) {
            let totalPages = Math.max(...$("div.navigation-pages > a.bxr-font-color").get().map(item => +$(item).text().trim()).filter(Boolean)) 
            this.debugger.put(`totalPages = ${totalPages}`)
            for (let page = 2; page <= Math.min(totalPages, +this.conf.pagesCount); page++) {
                this.query.add({ ...set, query: set.query, type: "page", page: page, lvl: 1 });
            }
        }
        
        let products = $("a.bxr-item-image-wrap.js-product[href]") 
        if (products.length == 0) {
            this.logger.put(`–ü–æ –∑–∞–ø—Ä–æ—Å—É ${set.query} –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ`)
            throw new NotFoundError()
        }
        products.slice(0, +this.conf.itemsCount).each((i, product) => {
            let link = `${HOST}${$(product)?.attr("href")}`
            this.query.add({ ...set, query: link, type: "card", lvl: 1 })
        }) 
    }

    //#region –ü–∞—Ä—Å–∏–Ω–≥ —Ç–æ–≤–∞—Ä–∞
    async parseCard(set: SetType, cacher: Cacher<ResultItem[]>) {
        let items: ResultItem[] = []

        const data = await this.makeRequest(set.query);
        const $ = cheerio.load(data);

        const name = $("h1").text()?.trim()
		const stock = "InStock"
		const link = set.query
		const price = $(".bxr-detail-price").text()?.trim().formatPrice()
		const oldprice = $(".bxr-detail-old-price").text()?.trim().formatPrice(",")
		const article = $(".detail-items > div:nth-of-type(4)").text()?.trim()?.replace(/^[^\d]+(\d+).*/, '$1');
		const brand = $("a.js-brand").text()?.trim()
		let imageLink = $("#bx_117848907_24289_main_photo")?.attr("href")?.trim()?.replace(/png$/, 'png-webp');
		imageLink = imageLink ? HOST + imageLink : "";
        const timestamp = getTimestamp()

        const item: ResultItem = {
            name, stock, link, price, oldprice, article, brand, imageLink, timestamp
        }
        items.push(item);

        cacher.cache = items
        return items;
    }

    //#region –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
    async makeRequest(url: string) {
        const opts: AsyncHTTPXRequestOptsCustom = {
            ...defaultOpts,
            engine: this.conf.engine,
            mode: this.conf.mode,
        };
        this.debugger.put(opts)

        const { success, headers, data } = await this.request("GET", url, {}, opts);
        this.debugger.put(data)

        if (!success || typeof data !== "string") throw new Error("–ù–µ—É–¥–∞—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å");
        if (headers.Status === 404) throw new NotFoundError();

        return data;
    }
}

// –ö–æ–¥ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω APSP v0.1
// –î–∞—Ç–∞: 12 –î–µ–∫ 2025
// ¬© BrandPol

–°–æ–æ–±—â–µ–Ω–∏—è –∏–∑ message_global:
üü° [–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ]: timestamp –Ω–µ—Ç –≤ –º–∞—Å—Å–∏–≤–µ, –¥–∞–Ω–Ω—ã–µ –¥–ª—è parsePage –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏

–°—Å—ã–ª–∫–∞ –Ω–∞ 1–π —Ç–æ–≤–∞—Ä: https://cosmofun.ru/product/maska_anti_stress_dlya_volos_i_kozhi_golovy_the_wake_up_circle_1/

–ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: üü© Sucsess üü©

üïö –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 10.80 —Å–µ–∫—É–Ω–¥
üß¢ –ö–æ–ª-–≤–æ –æ–±—Ä–∞—â–µ–Ω–∏–π –∫ –≤–Ω–µ—à–Ω–µ–º—É –ò–ò: 3
